# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2021, test
# This file is distributed under the same license as the qubes-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: qubes-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2021-12-15 21:10+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../user/how-to-guides/how-to-use-pci-devices.md:15
#: e575c8fe69f84f51b801c77c4cec8a50
msgid "*This page is part of [device handling in qubes](/doc/how-to-use-devices/).*"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:17
#: e2d9e81e738441b3b10192b599ecfcca
msgid "**Warning:** Only dom0 exposes PCI devices. Some of them are strictly required in dom0 (e.g., the host bridge). You may end up with an unusable system by attaching the wrong PCI device to a VM. PCI passthrough should be safe by default, but non-default options may be required. Please make sure you carefully read and understand the **[security considerations](/doc/device-handling-security/#pci-security)** before deviating from default behavior."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:23
#: 1dbf5d0baf104036a80171f13438dbe9
msgid "Introduction"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:25
#: e0e6c4d5e3744ba68416c11bc5a65c93
msgid "Unlike other devices ([USB](/doc/how-to-use-usb-devices/), [block](/doc/how-to-use-block-storage-devices/), mic), PCI devices need to be attached on VM-bootup. Similar to how you can't attach a new sound-card after your computer booted (and expect it to work properly), attaching PCI devices to already booted VMs isn't supported."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:28
#: aaf2572c4a0b4f01901cac9500570770
msgid "The Qubes installer attaches all network class controllers to `sys-net` and all USB controllers to `sys-usb` by default, if you chose to create the network and USB qube during install. While this covers most use cases, there are some occasions when you may want to manually attach one NIC to `sys-net` and another to a custom NetVM, or have some other type of PCI controller you want to manually attach."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:31
#: 74b1b14a9823456b91ef3ae6fb6ce5af
msgid "Some devices expose multiple functions with distinct BDF-numbers. Limits imposed by the PC and VT-d architectures may require all functions belonging to the same device to be attached to the same VM. This requirement can be dropped with the `no-strict-reset` option during attachment, bearing in mind the aforementioned [security considerations](/doc/device-handling-security/#pci-security). In the steps below, you can tell if this is needed if you see the BDF for the same device listed multiple times with only the number after the \".\" changing."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:36
#: 165156a87e634961a68c8a3356b0af84
msgid "While PCI device can only be used by one powered on VM at a time, it *is* possible to *assign* the same device to more than one VM at a time. This means that you can use the device in one VM, shut that VM down, start up a different VM (to which the same device is now attached), then use the device in that VM. This can be useful if, for example, you have only one USB controller, but you have multiple security domains which all require the use of different USB devices."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:40
#: 5be973687a9548b484574f8ee0e14944
msgid "Attaching Devices Using the GUI"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:42
#: bf278e88c774485891802ce6894e2c7a
msgid "The qube settings for a VM offers the \"Devices\"-tab. There you can attach PCI-devices to a qube."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:45
#: 8a58d6d722aa49c59fe186573e4b6207
msgid "To reach the settings of any qube either"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:47
#: b945625811a34ab48d2ab309b040121f
msgid "Press Alt+F3 to open the application finder, type in the VM name, select the \"![appmenu](/attachment/doc/qubes-appmenu-select.png)\\[VM-name\\]: Qube Settings\" menu entry and press enter or click \"Launch\"!"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:47
#: 1b47886c9ed9419595ceed3fe3cba541
msgid "appmenu"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:48
#: fef60429339b4e059fb68331da2aae8b
msgid "Select the VM in Qube Manager and click the settings-button or right-click the VM and select `Qube settings`."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:49
#: 3e28fd5662d24e9fa241fd61900e6800
msgid "Click the Domain Manager, hover the VM you want to attach a device to and select \"settings\" in the additional menu. (only running VMs!)"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:51
#: da78e9ee5fbc45e492d422503e7030a4
msgid "Select the \"Devices\" tab on the top bar."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:52
#: ee09485617a741ce8ff85167c78743a9
msgid "Select a device you want to attach to the qube and click the single arrow right! (`>`)"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:53
#: 8bd83d4f015842c6a860b2ad19483595
msgid "You're done. If everything worked out, once the qube boots (or reboots if it's running) it will start with the pci device attached."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:55
#: 790b35adb9c04daeabf38b32ad2a5db3
msgid "In case it doesn't work out, first try disabling memory-balancing in the settings (\"Advanced\" tab). If that doesn't help, read on to learn how to disable the strict reset requirement!"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:58
#: 309610ff055241ebb2d1338ce550dd0b
msgid "`qvm-pci` Usage"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:60
#: a470636fd32649979efc9224fc61f478
msgid "The `qvm-pci` tool allows PCI attachment and detachment. It's a shortcut for [`qvm-device pci`](/doc/how-to-use-devices/#general-qubes-device-widget-behavior-and-handling)."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:63
#: 196a96bb7b9d467cbdba77fd0ff51d15
msgid "To figure out what device to attach, first list the available PCI devices by running (as user) in dom0:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:69
#: 0760af37eaab40a3ae5bbdab401c49fe
msgid "This will show you the `backend:BDF` (Bus_Device.Function) address of each PCI device. It will look something like `dom0:00_1a.0`. Once you've found the address of the device you want to attach, then attach it like this:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:77
#: eb5ceab47eb04b1ab3d90a81a196439f
msgid "Since PCI devices have to be attached on bootup, attaching has to happen with the `--persistant` option."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:79
#: 6a7f8852c859453ab95bc6f1464e584b
msgid "For example, if `00_1a.0` is the BDF of the device you want to attach to the \"work\" domain, you would do this:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:85
#: a1c3ee12d176478ba14a896f9aaf2415
msgid "Possible Issues"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:87
#: 0ad26cd78d6a407d8caa6f6ad2d299d3
msgid "Visit the [PCI Troubleshooting guide](/doc/pci-troubleshooting/) to see issues that may arise due to PCI devices and how to troubleshoot them."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:89
#: 0e8100b8da2f424ea151c07759ac605e
msgid "Additional Attach Options"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:91
#: 1351526f8d484ac6b9c5e7462d8d40a5
msgid "Attaching a PCI device through the commandline offers additional options, specifiable via the `--option`/`-o` option. (Yes, confusing wording, there's an [issue for that](https://github.com/QubesOS/qubes-issues/issues/4530).)"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:94
#: 54ab41066e5148f7a5a9e2d2ef7c4c3f
msgid "`qvm-pci` exposes two additional options. Both are intended to fix device or driver specific issues, but both come with [heavy security implications](/doc/device-handling-security/#pci-security)! **Make sure you understand them before continuing!**"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:97
#: 2bff919454f34069ab97f39b2bc98a61
msgid "no-strict-reset"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:99
#: bdc22ab1a10f4405810adf64179695ef
msgid "Do not require PCI device to be reset before attaching it to another VM. This may leak usage data even without malicious intent!"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:102
#: ../user/how-to-guides/how-to-use-pci-devices.md:113
#: d2251d607dbc4642ba50cf9f5970bb62
#: e7c3c8c48a364633897078a07c85cd3f
msgid "usage example:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:108
#: 28ddcc97149c40efb0822960fb1c9f79
msgid "permissive"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:110
#: c6ac77d9493044babe9574ec4b384f00
msgid "Allow write access to full PCI config space instead of whitelisted registers. This increases attack surface and possibility of [side channel attacks](https://en.wikipedia.org/wiki/Side-channel_attack)."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:119
#: f12bc3441cfa451ba88b2443422bf203
msgid "Bringing PCI Devices Back to dom0"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:121
#: 27d26da3c12441c7b38e400419d58280
msgid "By default, when a device is detached from a VM (or when a VM with an attached PCI device is shut down), the device is *not* automatically attached back to dom0."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:123
#: 92722d37ae96492a94dd4285ed46e3f8
msgid "This is an intended feature."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:125
#: 1de604db5a8f4ea7859028ddafb0be33
msgid "A device which was previously attached to a VM less trusted than dom0 (which, in Qubes, is *all* of them) could attack dom0 if it were automatically reattached there."
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:127
#: 669cf459ff934ec5ac9e1dc1a8660acb
msgid "In order to re-enable the device in dom0, either:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:129
#: 3c2ad79ab5ea42019112ddb680b30ca9
msgid "Reboot the physical machine. (Best practice)"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:131
#: 67c18375526345b992d2ed8f0361370f
msgid "or"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:133
#: 60e590756c314d3786700e7c9557d3f1
msgid "Go to the sysfs (`/sys/bus/pci`), find the right device, detach it from the pciback driver, and attach it back to the original driver. Replace `<BDF>` with your full device, for example `0000:00:1c.2`:"
msgstr ""

#: ../user/how-to-guides/how-to-use-pci-devices.md:143
#: 0a81c8d0d87a4981aaa67bebf0b69d07
msgid "It is **strongly discouraged to reattach PCI devices to dom0**, especially if they don't support resetting!"
msgstr ""
