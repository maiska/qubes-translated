# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2021, test
# This file is distributed under the same license as the qubes-docs package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: qubes-docs \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2021-12-15 21:10+0100\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../user/advanced-topics/usb-qubes.md:15
#: 51ce143a08854d7493c5ccc14dc4ea45
msgid "If during installation you enabled the creation of a USB-qube, your system should be setup already and none of the mentioned steps here should be necessary. (Unless you want to [remove your USB-qube](#removing-a-usb-qube).) If for any reason no USB-qube was created during installation, this guide will show you how to do so."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:17
#: 1d41f5fb69d742c98ca97e5d3956f1c2
msgid "**Caution:** If you want to use a USB-keyboard, please beware of the possibility to lock yourself out! To avoid this problem [enable your keyboard for login](#enable-a-usb-keyboard-for-login)!"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:19
#: 03f73e4f58164a29b6c8debd32b7a853
msgid "Creating and Using a USB qube"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:21
#: fc4c751959e54fbeb1ff9faf9d786efd
msgid "**Warning:** This has the potential to prevent you from connecting a keyboard to Qubes via USB. There are problems with doing this in an encrypted install (LUKS). If you find yourself in this situation, see this [issue](https://github.com/QubesOS/qubes-issues/issues/2270#issuecomment-242900312)."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:25
#: 7e3416f0f5e242f397e6628b44525986
msgid "A USB qube acts as a secure handler for potentially malicious USB devices, preventing them from coming into contact with dom0 (which could otherwise be fatal to the security of the whole system). It thereby mitigates some of the [security implications](/doc/device-handling-security/#usb-security) of using USB devices. With a USB qube, every time you connect an untrusted USB drive to a USB port managed by that USB controller, you will have to attach it to the qube in which you wish to use it (if different from the USB qube itself), either by using Qubes VM Manager or the command line (see instructions above). The USB controller may be assigned on the **Devices** tab of a qube's settings page in Qubes VM Manager or by using the [qvm-pci](/doc/how-to-use-pci-devices/) command. For guidance on finding the correct USB controller, see the [according passage on PCI-devices](/doc/how-to-use-usb-devices/#finding-the-right-usb-controller). You can create a USB qube using the management stack by performing the following steps as root in dom0:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:35
#: 913be8c7d5814137ae8481ea009bd71d
msgid "Alternatively, you can create a USB qube manually as follows:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:37
#: 165aa6b2e9c14cd29f8831d5c85dfd0f
msgid "Read the [PCI Devices](/doc/how-to-use-pci-devices/) page to learn how to list and identify your USB controllers. Carefully check whether you have a USB controller that would be appropriate to assign to a USB qube. Note that it should be free of input devices, programmable devices, and any other devices that must be directly available to dom0. If you find a free controller, note its name and proceed to step 2."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:41
#: d80891508a9847eb9c4f74618a00dc5d
msgid "Create a new qube. Give it an appropriate name and color label (recommended: `sys-usb`, red)."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:43
#: 920b40cfd019400a962be00e6d292453
msgid "In the qube's settings, go to the \"Devices\" tab. Find the USB controller that you identified in step 1 in the \"Available\" list. Move it to the \"Selected\" list by highlighting it and clicking the single arrow `>` button."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:47
#: 2b1b86b669ef47a5bf48bee1b35d49e1
msgid "**Caution:** By assigning a USB controller to a USB qube, it will no longer be available to dom0. This can make your system unusable if, for example, you have only one USB controller, and you are running Qubes off of a USB drive."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:50
#: a54831ab58894360a2c875b76c874afe
msgid "Click `OK`. Restart the qube."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:52
#: 2c0f16abdcbe4a8d84f13af01fd75cf7
msgid "Recommended: Check the box on the \"Basic\" tab which says \"Start VM automatically on boot\". (This will help to mitigate attacks in which someone forces your system to reboot, then plugs in a malicious USB device.)"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:55
#: 13f746a2522446f092f369a015206a13
msgid "If the USB qube will not start, please have a look at the [faq](/faq/#i-created-a-usb-vm-and-assigned-usb-controllers-to-it-now-the-usb-vm-wont-boot)."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:57
#: 5c3710b06b2e432d8e330b8484368fe9
msgid "Enable a USB keyboard for login"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:59
#: 0305753873fa492fbf324490ff6db3b2
msgid "**Caution:** Please carefully read the [Security Warning about USB Input Devices](/doc/device-handling-security/#security-warning-on-usb-input-devices) before proceeding!"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:61
#: dc945c30192a4f97a1b7ae222ff8564f
msgid "If you use USB keyboard, automatic USB qube creation during installation is disabled. Additional steps are required to avoid locking you out from the system. Those steps are not performed by default, because of risk explained in [Security Warning about USB Input Devices](/doc/device-handling-security/#security-warning-on-usb-input-devices)."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:65
#: d7eb529f7c8c409092e246c11d5aa27b
msgid "Automatic setup"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:67
#: 9b5db900a361449b98851b59bab1f509
msgid "To allow USB keyboard usage (including early boot for LUKS passphrase), make sure you have the latest `qubes-mgmt-salt-dom0-virtual-machines` package (simply [install dom0 updates](/doc/how-to-install-software-in-dom0/#how-to-update-dom0)) and execute in dom0:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:73
#: c17c4b22bffe40ad824cc4b7a45648ff
msgid "The above command will take care of all required configuration, including creating USB qube if not present. Note that it will expose dom0 to USB devices while entering LUKS passphrase. Users are advised to physically disconnect other devices from the system for that time, to minimize the risk."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:77
#: f3bbe0e0532144adb5062f251ff31b11
msgid "To undo these changes, please follow the section on [**Removing a USB qube**](#removing-a-usb-qube)!"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:79
#: 37b67901a29b43bb83b49f31aa9aae0d
msgid "If you wish to perform only a subset of this configuration (for example do not enable USB keyboard during boot), see manual instructions below."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:81
#: cc658ca264bb4990978f76cb018a8191
msgid "Manual setup"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:83
#: 3df507c141f94f7292b99b6b07bb1521
msgid "In order to use a USB keyboard, you must first attach it to a USB qube, then give that qube permission to pass keyboard input to dom0. Edit the `qubes.InputKeyboard` policy file in dom0, which is located here:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:90
#: 933cb703e91f42fba6f62a35eb169798
msgid "Add a line like this one to the top of the file:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:96
#: ../user/advanced-topics/usb-qubes.md:137
#: 06d295880df94b3e841ad939cf04332d
#: c4ab244f4ce847e9ae12f7e07dbfd5f9
msgid "(Change `sys-usb` to your desired USB qube.)"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:98
#: 2833623a2b80498fae93aeaf6925c5e5
msgid "You can now use your USB keyboard to login and for LUKS decryption during boot."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:100
#: c38fc24ec6584403bf719fc0c31e98f4
msgid "For a confirmation dialog each time the USB keyboard is connected, *which will effectively disable your USB keyboard for login and LUKS decryption*, change this line to:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:106
#: 5ae91635676a4cf892fc17284bf6fd8a
msgid "*Don't do that if you want to unlock your device with a USB keyboard!*"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:108
#: 05903a75d18b4e088a27fcf7de4942e8
msgid "Additionally, if you want to use USB keyboard to enter LUKS passphrase, it is incompatible with [hiding USB controllers from dom0](#how-to-hide-all-usb-controllers-from-dom0). You need to revert that procedure (remove `rd.qubes.hide_all_usb` option from files mentioned there) and employ alternative protection during system boot - disconnect other devices during startup."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:111
#: a426fb46cdd74417ad2eccaf01ac4dd7
msgid "Auto Enabling A USB Mouse"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:113
#: 1f4bfcc639fc468d8fe5069367ad610d
msgid "**Caution:** Please carefully read the [Security Warning about USB Input Devices](/doc/device-handling-security/#security-warning-on-usb-input-devices) before proceeding."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:115
#: 31e4e0c6177f44eebf3e618a45abec54
msgid "Handling a USB mouse isn't as critical as handling a keyboard, since you can login using the keyboard and accept the popup dialogue using your keyboard alone."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:117
#: f7381a79f6214ba48034a01baf517b1e
msgid "If you want to attach the USB mouse automatically anyway, you have to edit the `qubes.InputMouse` policy file in dom0, located at:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:123
#: 6b4b560753a1482b8df91408c986d7c2
msgid "The first line should read similar to:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:129
#: 95904e1fd6484ecd9b228fb47fca879e
msgid "which will ask for conformation each time a USB mouse is attached. If the file is empty or does not exist, maybe something went wrong during setup, try to rerun `qubesctl state.sls qvm.sys-usb` in dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:131
#: e5b41a5e2b4542b698aa736a8eebbfd9
msgid "In case you are absolutely sure you do not want to confirm mouse access from `sys-usb` to `dom0`, you may add the following line on top of the file:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:139
#: 9f016774d42e47e9b4c5e0ae10d206dd
msgid "How to hide all USB controllers from dom0"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:141
#: e6e5063e3a4c4b3caebd004189912d9b
msgid "(Note: `rd.qubes.hide_all_usb` is set automatically if you opt to create a USB qube during installation. This also occurs automatically if you choose to [create a USB qube](#creating-and-using-a-usb-qube) using the `qubesctl` method, which is the first pair of steps in the linked section.)"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:145
#: efebc013e1f04731a45077fd0cef1d53
msgid "**Warning:** A USB keyboard cannot be used to type the disk passphrase if USB controllers were hidden from dom0. Before hiding USB controllers, make sure your laptop keyboard is not internally connected via USB (by checking output of the `lsusb` command) or that you have a PS/2 keyboard at hand (if using a desktop PC). Failure to do so will render your system unusable."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:149
#: 29b74311aee74112ac83673562f8e346
msgid "If you create a USB qube manually, there will be a brief period of time during the boot process when dom0 will be exposed to your USB controllers (and any attached devices). This is a potential security risk, since even brief exposure to a malicious USB device could result in dom0 being compromised. There are two approaches to this problem:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:153
#: d950ea47fdfc49969f16e1eef0e05aeb
msgid "Physically disconnect all USB devices whenever you reboot the host."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:154
#: 42eb258fd7d84dd4b3285b3ae2476077
msgid "Hide (i.e., blacklist) all USB controllers from dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:156
#: 177a65ecc8d44772a16a7fa543a3e0d8
msgid "**Warning:** If you use a USB [AEM](/doc/anti-evil-maid/) device, do not use the second option. Using a USB AEM device requires dom0 to have access to the USB controller to which your USB AEM device is attached. If dom0 cannot read your USB AEM device, AEM will hang."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:160
#: 263598165b664f71b44607b287b3b6d6
msgid "The procedure to hide all USB controllers from dom0 is as follows:"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:162
#: ../user/advanced-topics/usb-qubes.md:183
#: e862993c60df43d995029403de3c7c97
#: 5ddec2858ec04845bf8b2d3fe88706ad
msgid "GRUB2"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:164
#: ../user/advanced-topics/usb-qubes.md:187
#: 6b77105930b64318b1794127a53c4866
#: 0d4e4555f44b49afbb29c82ece964635
msgid "Open the file `/etc/default/grub` in dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:165
#: 4adcfcca87e74866aed3c46b37dfd73f
msgid "Find the line that begins with `GRUB_CMDLINE_LINUX`."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:166
#: ff113478b1ce4dcfb3dd52f1483a547d
msgid "Add `rd.qubes.hide_all_usb` to that line."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:167
#: ../user/advanced-topics/usb-qubes.md:176
#: ../user/advanced-topics/usb-qubes.md:190
#: ../user/advanced-topics/usb-qubes.md:201
#: f4edd5d8eda048a7ba6662cdb03a1f2a
#: 87420f4ad7dd49689199774d343b6af9
#: f1da4f872d79483da566e232049fbb66
#: 39f19c506b634691ad46a190d2034c85
msgid "Save and close the file."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:168
#: ../user/advanced-topics/usb-qubes.md:191
#: ca986b70635e4da692dfc446870c1f32
#: a6645fcf71b7495695e20335923b9127
msgid "Run the command `grub2-mkconfig -o /boot/grub2/grub.cfg` in dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:169
#: ../user/advanced-topics/usb-qubes.md:177
#: ../user/advanced-topics/usb-qubes.md:192
#: ../user/advanced-topics/usb-qubes.md:202
#: 37958d7e2db745c2b9ecbb9da0b347fd
#: 33250826ce8d434c85623a4b62b8d7f0
#: 4cfd5248b0d34ae8b6f43e8479200ac8
#: 9cf5e5e6cd484381aada00b3f0e4adad
msgid "Reboot."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:171
#: ../user/advanced-topics/usb-qubes.md:194
#: 82a16d4dc7f4413b8b8bd9ac185c0693
#: 568c959c582446cb92119da50efd7bec
msgid "EFI"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:173
#: ../user/advanced-topics/usb-qubes.md:198
#: 80b04ce4dfcb480f8df1f21817c0739d
#: eda7079205c742daa3a9531ef6a11d2a
msgid "Open the file `/boot/efi/EFI/qubes/xen.cfg` in dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:174
#: cad136f6f4c84a97ac83fce4ca5ad5f2
msgid "Find the lines that begin with `kernel=`. There may be more than one."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:175
#: b53fd20dc48e40dfbcfe7a8018ecf824
msgid "Add `rd.qubes.hide_all_usb` to those lines."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:179
#: 3a9e817357ad4ae385c3e7f21460a63b
msgid "Removing a USB qube"
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:181
#: 3737582adb594f47b3e38ed4b62c68f0
msgid "**Warning:** This procedure will result in your USB controller(s) being attached directly to dom0."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:185
#: ../user/advanced-topics/usb-qubes.md:196
#: d548071bb1c74d9982b38ec0e447f4ca
#: 62e05a329d9c486bbd42a8e84bcad914
msgid "Shut down the USB qube."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:186
#: ../user/advanced-topics/usb-qubes.md:197
#: 160cfb501286409c8621c7f57c92e70a
#: 79be0dcf04ea49779a4f9861359ef847
msgid "In Qubes Manager, right-click on the USB qube and select \"Remove VM.\""
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:188
#: 9a7879886f7f4a49bd9ff34c506edf2a
msgid "Find the line(s) that begins with `GRUB_CMDLINE_LINUX`."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:189
#: ../user/advanced-topics/usb-qubes.md:200
#: cfe68ddd7a9342ec8e09e6cc4c468920
#: 1fec0baeb5c04579a38942785043d383
msgid "If `rd.qubes.hide_all_usb` appears anywhere in those lines, remove it."
msgstr ""

#: ../user/advanced-topics/usb-qubes.md:199
#: c99369dec8eb487d877f83496b00c00b
msgid "Find the line(s) that begins with `kernel=`."
msgstr ""
